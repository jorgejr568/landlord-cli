{% extends "base.html" %}
{% block title %}Códigos de Recuperação - Landlord{% endblock %}
{% block content %}
<div class="page-header">
    <div class="page-header-info">
        <h2 class="page-title">Códigos de Recuperação</h2>
        <p class="page-subtitle">Guarde estes códigos em um local seguro. Cada código pode ser usado apenas uma vez.</p>
    </div>
</div>

<div class="panel">
    <div class="panel-head"><h5>Seus códigos de recuperação</h5></div>
    <div class="panel-body">
        <div class="mfa-enforcement-banner" style="background: #fff8e1; border-color: #f9a825;">
            Atenção: estes códigos não serão exibidos novamente. Salve-os agora!
        </div>
        <div class="recovery-grid" id="recovery-codes">
            {% for code in recovery_codes %}
            <code>{{ code }}</code>
            {% endfor %}
        </div>
        <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
            <button class="btn btn--sm" id="copy-codes-btn" onclick="copyRecoveryCodes()">Copiar todos</button>
            <a href="/security" class="btn btn--primary btn--sm">Continuar</a>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script>
function copyRecoveryCodes() {
    var codes = [];
    document.querySelectorAll('#recovery-codes code').forEach(function(el) {
        codes.push(el.textContent.trim());
    });
    navigator.clipboard.writeText(codes.join('\n')).then(function() {
        var btn = document.getElementById('copy-codes-btn');
        btn.textContent = 'Copiado!';
        setTimeout(function() { btn.textContent = 'Copiar todos'; }, 2000);
    });
}
</script>
{% endblock %}
